server:
  port: 8080
  error:
    include-message: always
    include-binding-errors: always
  servlet:
    session:
      cookie:
        same-site: lax
        secure: false  # Set to true in production with HTTPS
        http-only: true
        name: MEETING_PLANNER_WEBAPP_SESSION

spring:
  application:
    name: meeting-planner-web-app
  config:
    import: "classpath:agent-application.yml"

  thymeleaf:
    cache: false
    prefix: classpath:/templates/
    suffix: .html

  # OAuth2 Security Configuration
  security:
    oauth2:
      client:
        registration:
          meeting-planner:
            provider: meeting-planner
            client-id: meeting-planner-web
            client-secret: web-secret
            client-authentication-method: client_secret_basic
            authorization-grant-type: authorization_code
            redirect-uri: "http://localhost:8080/login/oauth2/code/meeting-planner"
            scope: [ openid, profile, email, meeting.read, meeting.write ]
            client-name: "Meeting Planner Web App"
          location-mcp:
            provider: auth-server
            client-id: location-mcp
            client-secret: mcp-secret
            authorization-grant-type: client_credentials
            scope: [ mcp.invoke ]
            client-name: "Location MCP Client"
        provider:
          meeting-planner:
            issuer-uri: http://localhost:9000
            user-name-attribute: sub
          auth-server:
            token-uri: http://localhost:9000/oauth2/token
            user-name-attribute: sub

# Embabel Agent Configuration
embabel:
  agent:
    timeout: 30s

logging:
  level:
    com.embabel: INFO
    org.rag4j.meetingplanner.webapp.SessionDebugFilter: INFO
    org.springframework.security: INFO
    org.springframework.web: INFO
    org.springframework.security.oauth2.client: INFO
    org.springframework.security.oauth2.core: INFO
    root: INFO
